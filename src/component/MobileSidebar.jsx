import styled from "styled-components";
import { AnimatePresence, motion } from "framer-motion";
import { Link } from "react-router-dom";
import { useLocation } from "react-router-dom";
import { useState, useEffect } from "react";

const Container = styled(motion.div)`
  width: 340px;
  height: 896px;
  background: #1a1e1f;
  padding-top: 100.4px;
  padding-left: 40px;
  position: fixed;
  left: 0;
  top: 0px;
  z-index: 33;
  @media (min-width: 950px) {
    display: none;
  }
`;

const MenuItem = styled(motion.div)`
  display: flex;
  align-items: center;
  max-width: 171.78px;
  margin-bottom: 56.79px;
  cursor: pointer;
`;
const NavIcon = styled(motion.svg)`
  width: 22.78px;
  height: 23.98px;
`;
const NavText = styled.p`
  text-align: left;
  padding-left: 29.4px;
  font-size: 17px;
  font-weight: 700;
  color: rgba(239, 238, 224, 0.25);
`;
const Menu = styled.div`
  position: absolute;
  top: 20px;
  font-size: 34px;
  font-weight: 700;
  color: rgba(239, 238, 224, 0.25);
  cursor: pointer;
`;
const SideMenu = styled(motion.div)``;

const itemVariants = {
  closed: {
    opacity: 0,
  },
  open: { opacity: 1 },
};
const sideVariants = {
  closed: {
    transition: {
      staggerChildren: 0.2,
      staggerDirection: -1,
    },
  },
  open: {
    transition: {
      staggerChildren: 0.2,
      staggerDirection: 1,
    },
  },
};
const MobileSidebar = ({ menu, setMenu }) => {
  const location = useLocation();
  const [iconColor, setIconColor] = useState({
    home: "#EFEEE0",
    collection: "#EFEEE0",
  });
  useEffect(() => {
    if (location.pathname === "/") {
      setIconColor({ home: "#FACD66", collection: "#EFEEE0" });
    } else if (location.pathname === "/collection") {
      setIconColor({ home: "#EFEEE0", collection: "#FACD66" });
    }
  }, [location.pathname]);
  return (
    <AnimatePresence>
      {menu && (
        <Container
          initial={{ width: 0 }}
          animate={{
            width: 340,
          }}
          exit={{
            width: 0,
            transition: { delay: 0.7, duration: 0.3 },
          }}
        >
          <SideMenu
            initial="closed"
            animate="open"
            exit="closed"
            variants={sideVariants}
            className="flex flex-col"
          >
            <Menu onClick={() => setMenu(false)}>X</Menu>
            <Link to="/">
              <MenuItem whileHover={{ scale: 1.1 }} variants={itemVariants}>
                <NavIcon
                  width="18"
                  height="20"
                  viewBox="0 0 18 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M6.38171 18.0503V15.239C6.3817 14.5266 6.96099 13.9478 7.67852 13.9433H10.3132C11.0339 13.9433 11.6182 14.5234 11.6182 15.239V18.0421C11.6182 18.66 12.1203 19.1622 12.7427 19.1667H14.5401C15.3796 19.1688 16.1855 18.8392 16.7799 18.2507C17.3742 17.6621 17.7083 16.8629 17.7083 16.0294V8.0437C17.7083 7.37045 17.4077 6.73183 16.8875 6.29989L10.781 1.45142C9.7136 0.603372 8.18905 0.630768 7.15323 1.51661L1.17805 6.29989C0.633305 6.7191 0.307716 7.35961 0.291626 8.0437V16.0213C0.291626 17.7584 1.71006 19.1667 3.45978 19.1667H5.21623C5.51587 19.1688 5.80399 19.0522 6.01664 18.8426C6.2293 18.633 6.34889 18.3478 6.34888 18.0503H6.38171Z"
                    fill={iconColor.home}
                  />
                </NavIcon>
                <NavText>Home</NavText>
              </MenuItem>
            </Link>

            <Link to="/collection">
              <MenuItem whileHover={{ scale: 1.1 }} variants={itemVariants}>
                <NavIcon
                  width="22"
                  height="22"
                  viewBox="0 0 22 22"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M15.5834 4.35416H14.6667V2.98832C14.6667 2.22749 14.0434 1.60416 13.2825 1.60416H8.71754C7.95671 1.60416 7.33337 2.22749 7.33337 2.98832V4.35416H6.41671C5.40837 4.35416 4.58337 5.17916 4.58337 6.18749V6.30666C4.87671 6.22416 5.17921 6.18749 5.50004 6.18749H16.5C16.8209 6.18749 17.1234 6.22416 17.4167 6.30666V6.18749C17.4167 5.17916 16.5917 4.35416 15.5834 4.35416Z"
                    fill={iconColor.collection}
                  />
                  <path
                    d="M12.7692 15.5192C12.4759 15.5192 12.2467 15.7575 12.2467 16.0417C12.2467 16.3258 12.485 16.5642 12.7692 16.5642C13.0534 16.5642 13.2917 16.3258 13.2917 16.0417C13.2917 15.7575 13.0534 15.5192 12.7692 15.5192Z"
                    fill={iconColor.collection}
                  />
                  <path
                    d="M8.31413 16.3258C8.02079 16.3258 7.79163 16.5642 7.79163 16.8483C7.79163 17.1325 8.02996 17.3708 8.31413 17.3708C8.59829 17.3708 8.83663 17.1325 8.83663 16.8483C8.83663 16.5642 8.60746 16.3258 8.31413 16.3258Z"
                    fill={iconColor.collection}
                  />
                  <path
                    d="M17.4167 7.68167C17.1234 7.59917 16.8209 7.5625 16.5 7.5625H5.50004C5.17921 7.5625 4.87671 7.59917 4.58337 7.68167C3.00671 8.09417 1.83337 9.53333 1.83337 11.2292V16.7292C1.83337 18.7458 3.48337 20.3958 5.50004 20.3958H16.5C18.5167 20.3958 20.1667 18.7458 20.1667 16.7292V11.2292C20.1667 9.53333 18.9934 8.09417 17.4167 7.68167ZM14.6667 12.1733V16.0417C14.6667 17.0867 13.8142 17.9392 12.7692 17.9392C11.7242 17.9392 10.8717 17.0867 10.8717 16.0417C10.8717 14.9967 11.7242 14.1442 12.7692 14.1442C12.9525 14.1442 13.1267 14.1808 13.2917 14.2267V13.0717L10.2209 13.9058V16.8483C10.2209 16.8575 10.2209 16.8667 10.2117 16.8758C10.2025 17.9117 9.35004 18.755 8.31421 18.755C7.26921 18.755 6.41671 17.9025 6.41671 16.8483C6.41671 15.7942 7.26921 14.9508 8.31421 14.9508C8.49754 14.9508 8.67171 14.9875 8.84587 15.0333V13.3833V11.9625C8.84587 11.1742 9.34087 10.5325 10.0925 10.3308L12.5217 9.66167C13.3009 9.45083 13.7959 9.6525 14.0709 9.86333C14.3459 10.0742 14.6667 10.4867 14.6667 11.3025V12.1733Z"
                    fill={iconColor.collection}
                  />
                </NavIcon>
                <NavText>My collections</NavText>
              </MenuItem>
            </Link>

            <MenuItem whileHover={{ scale: 1.1 }} variants={itemVariants}>
              <NavIcon
                width="22"
                height="22"
                viewBox="0 0 22 22"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M7.10419 1.83331V4.58331H6.41669C6.17835 4.58331 5.94919 4.59248 5.72919 4.62915V1.83331C5.72919 1.45748 6.04085 1.14581 6.41669 1.14581C6.79252 1.14581 7.10419 1.45748 7.10419 1.83331Z"
                  fill="#EFEEE0"
                />
                <path
                  d="M15.5833 4.58331H6.41665C6.17831 4.58331 5.94915 4.59248 5.72915 4.62915C3.36415 4.90415 1.83331 6.65498 1.83331 9.16665V15.5833C1.83331 18.3333 3.66665 20.1666 6.41665 20.1666H15.5833C18.3333 20.1666 20.1666 18.3333 20.1666 15.5833V9.16665C20.1666 6.41665 18.3333 4.58331 15.5833 4.58331ZM7.22331 14.6666C5.95831 14.6666 4.93165 13.64 4.93165 12.375C4.93165 11.11 5.95831 10.0833 7.22331 10.0833C8.48831 10.0833 9.51498 11.11 9.51498 12.375C9.51498 13.64 8.48831 14.6666 7.22331 14.6666ZM13.1816 14.8958H12.7233C12.3475 14.8958 12.0358 14.5841 12.0358 14.2083C12.0358 13.8325 12.3475 13.5208 12.7233 13.5208H13.1816C13.5575 13.5208 13.8691 13.8325 13.8691 14.2083C13.8691 14.5841 13.5575 14.8958 13.1816 14.8958ZM16.39 14.8958H15.9316C15.5558 14.8958 15.2441 14.5841 15.2441 14.2083C15.2441 13.8325 15.5558 13.5208 15.9316 13.5208H16.39C16.7658 13.5208 17.0775 13.8325 17.0775 14.2083C17.0775 14.5841 16.7658 14.8958 16.39 14.8958ZM16.39 11.2291H12.7233C12.3475 11.2291 12.0358 10.9175 12.0358 10.5416C12.0358 10.1658 12.3475 9.85415 12.7233 9.85415H16.39C16.7658 9.85415 17.0775 10.1658 17.0775 10.5416C17.0775 10.9175 16.7658 11.2291 16.39 11.2291Z"
                  fill="#EFEEE0"
                />
              </NavIcon>
              <NavText>Radio</NavText>
            </MenuItem>
            <MenuItem whileHover={{ scale: 1.1 }} variants={itemVariants}>
              <NavIcon
                width="22"
                height="22"
                viewBox="0 0 22 22"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M10.3125 7.20502H1.83331V14.8408C1.83331 14.8959 1.83331 14.9509 1.84248 14.9967H10.3125V7.20502Z"
                  fill="#EFEEE0"
                />
                <path
                  d="M7.04919 5.82998H10.3125V1.83331H7.07669V5.71998C7.07669 5.75665 7.05836 5.79331 7.04919 5.82998Z"
                  fill="#EFEEE0"
                />
                <path
                  d="M5.70168 5.71998V1.97998C3.66668 2.40165 2.33751 3.75831 1.95251 5.82998H5.72001C5.71085 5.79331 5.70168 5.75665 5.70168 5.71998Z"
                  fill="#EFEEE0"
                />
                <path
                  d="M14.8683 1.83331H11.6875V5.82998H14.8683V1.83331Z"
                  fill="#EFEEE0"
                />
                <path
                  d="M16.2342 5.82999H20.0475C19.6625 3.73999 18.315 2.37416 16.2434 1.97083V5.80249C16.2434 5.81166 16.2342 5.82083 16.2342 5.82999Z"
                  fill="#EFEEE0"
                />
                <path
                  d="M16.2433 20.0291C18.2508 19.635 19.5708 18.3516 20.0017 16.3716H16.2433V20.0291Z"
                  fill="#EFEEE0"
                />
                <path
                  d="M14.8683 16.3716H11.6875V20.1666H14.8683V16.3716Z"
                  fill="#EFEEE0"
                />
                <path
                  d="M11.6875 14.9967H20.1575C20.1667 14.9509 20.1667 14.8959 20.1667 14.8408V7.20502H11.6875V14.9967Z"
                  fill="#EFEEE0"
                />
                <path
                  d="M10.3125 16.3716H7.07666V20.1666H10.3125V16.3716Z"
                  fill="#EFEEE0"
                />
                <path
                  d="M1.99835 16.3716C2.42919 18.3333 3.73085 19.6166 5.70169 20.02V16.3716H1.99835Z"
                  fill="#EFEEE0"
                />
              </NavIcon>
              <NavText>Music Videos</NavText>
            </MenuItem>
            <MenuItem whileHover={{ scale: 1.1 }} variants={itemVariants}>
              {" "}
              <NavIcon
                width="22"
                height="22"
                viewBox="0 0 22 22"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M11 1.83333C8.59837 1.83333 6.64587 3.78583 6.64587 6.18749C6.64587 8.54333 8.48837 10.45 10.89 10.5325C10.9634 10.5233 11.0367 10.5233 11.0917 10.5325C11.11 10.5325 11.1192 10.5325 11.1375 10.5325C11.1467 10.5325 11.1467 10.5325 11.1559 10.5325C13.5025 10.45 15.345 8.54333 15.3542 6.18749C15.3542 3.78583 13.4017 1.83333 11 1.83333Z"
                  fill="#EFEEE0"
                />
                <path
                  d="M15.6566 12.9708C13.0991 11.2658 8.9283 11.2658 6.35246 12.9708C5.1883 13.75 4.54663 14.8042 4.54663 15.9317C4.54663 17.0592 5.1883 18.1042 6.3433 18.8742C7.62663 19.7358 9.3133 20.1667 11 20.1667C12.6866 20.1667 14.3733 19.7358 15.6566 18.8742C16.8116 18.095 17.4533 17.05 17.4533 15.9133C17.4441 14.7858 16.8116 13.7408 15.6566 12.9708Z"
                  fill="#EFEEE0"
                />
              </NavIcon>
              <NavText>Profile</NavText>
            </MenuItem>
            <MenuItem whileHover={{ scale: 1.1 }} variants={itemVariants}>
              {" "}
              <NavIcon
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M9.53498 0.833313C11.8107 0.833313 13.6666 2.65748 13.6666 4.90331V9.29415H8.07072C7.66967 9.29415 7.35257 9.60581 7.35257 9.99998C7.35257 10.385 7.66967 10.7058 8.07072 10.7058H13.6666V15.0875C13.6666 17.3333 11.8107 19.1666 9.51633 19.1666H4.9743C2.6893 19.1666 0.833313 17.3425 0.833313 15.0966V4.91248C0.833313 2.65748 2.69862 0.833313 4.98363 0.833313H9.53498ZM15.9952 6.83766C16.2702 6.5535 16.7193 6.5535 16.9943 6.8285L19.671 9.496C19.8085 9.6335 19.8818 9.80766 19.8818 10.0002C19.8818 10.1835 19.8085 10.3668 19.671 10.4952L16.9943 13.1627C16.8568 13.3002 16.6735 13.3735 16.4993 13.3735C16.316 13.3735 16.1327 13.3002 15.9952 13.1627C15.7202 12.8877 15.7202 12.4385 15.9952 12.1635L17.4618 10.706H13.6668V9.29433H17.4618L15.9952 7.83683C15.7202 7.56183 15.7202 7.11266 15.9952 6.83766Z"
                  fill="#EFEEE0"
                />
              </NavIcon>
              <NavText>Log out</NavText>
            </MenuItem>
          </SideMenu>
        </Container>
      )}
    </AnimatePresence>
  );
};

export default MobileSidebar;
